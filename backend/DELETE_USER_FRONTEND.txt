// ===== DELETE USER FUNCTION =====
// Add this code around line 583 in dashboard.js (before "// Load dashboard by default")

  // Delete user function
  window.deleteUser = async (userId, userName) => {
    if (!confirm(`⚠️ Are you sure you want to delete ${userName}?\n\nThis will permanently delete:\n• User account\n• All their transactions\n\nThis action CANNOT be undone!`)) {
      return;
    }

    try {
      const res = await fetch(`/api/admin/users/${userId}`, {
        method: "DELETE",
        headers: { Authorization: `Bearer ${token}` }
      });

      const data = await res.json();

      if (data.success) {
        alert(`✅ ${data.message}`);
        await fetchAndRenderUsers(); // Refresh the table
      } else {
        alert(`❌ ${data.message}`);
      }
    } catch (error) {
      console.error("Error deleting user:", error);
      alert(`❌ Failed to delete user: ${error.message}`);
    }
  };
